{"version":3,"sources":["webpack://keksobooking/./source/js/status-page.js","webpack://keksobooking/./source/js/util.js","webpack://keksobooking/./source/js/hostel-card.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/filter.js","webpack://keksobooking/./source/js/api.js","webpack://keksobooking/./source/js/messages.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/form-photo.js","webpack://keksobooking/./source/js/main.js"],"names":["toggleFormStatus","form","formClass","status","formElements","children","classList","remove","formElement","disabled","add","togglePageStatus","document","querySelector","formMapFilter","declination","number","txt","cases","isEscEvent","evt","key","debounce","fn","delay","time","debounced","apply","this","arguments","clearTimeout","setTimeout","WORD_DECLINATION","typeTranslate","palace","flat","house","bungalow","DefaultLocation","LeafletProperties","map","L","on","setView","lat","lng","markerGroup","tileLayer","attribution","addTo","renderMarkers","data","markers","filterMarkers","layerGroup","forEach","elem","hostel","group","mainIcon","icon","iconUrl","iconSize","iconAnchor","marker","location","bindPopup","offer","author","title","address","price","type","rooms","guests","checkin","checkout","features","description","photos","avatar","hostelCard","content","cloneNode","src","textContent","innerHTML","featuresList","hostelFeaturesItems","arr","basicClass","itemsFragment","createDocumentFragment","modifyClass","newElement","createElement","appendChild","createListItem","photoOfHostel","hostelPhotoContainer","img","imgFragment","picture","addSrcFromArr","createHostelCardElement","createMarker","filterForm","hostelType","hostelPrice","hostelRooms","hostelGuests","hostelFeatures","MAX_PRICE","priceRange","low","min","max","middle","high","any","ALL","filterHostel","activeFeatures","querySelectorAll","isFiltered","value","length","priceRangeValue","checkboxes","checkbox","includes","compareFeatures","filteredArray","counterOfFilteredElement","i","push","API_URL","messageTemplate","errorTemplate","main","showErrorMessage","errorText","messageError","style","zIndex","onEscCloseMessage","removeEventListener","addEventListener","minPriceOfType","addressMarker","draggable","createSearchMarker","selectType","inputPrice","selectCheckIn","selectCheckOut","inputAddress","inputTitle","selectRoomNumber","selectGuests","resetButton","onMarkerMove","getLatLng","toFixed","onSelectChange","target","onTypeInputChange","placeholder","onSelectRoomsChange","guestOptions","guestElements","guestsArray","Array","from","guest","display","sendFormSuccess","messageSuccess","showSuccessMessage","reset","sendFormError","setCustomValidity","reportValidity","validity","rangeOverflow","rangeUnderflow","onSuccess","onError","preventDefault","FormData","fetch","method","body","then","response","ok","Error","catch","setLatLng","readOnly","avatarPreviewPicture","avatarPreviewUpLoader","hostelPreviewPicture","hostelPreviewUploader","IMG_FORMAT","onUploadeChange","upload","preview","file","files","fileType","matches","alt","width","height","createImgElement","reader","FileReader","result","readAsDataURL","removeLayer","closePopup","reRenderMarkers","setFilterListener","message","json"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const toggleFormStatus = (form, formClass, status) => {\n  const formElements = form.children;\n  if (status) {\n    form.classList.remove(`${formClass}--disabled`);\n\n    for (let formElement of formElements) {\n      formElement.disabled = false;\n    }\n\n  } else {\n    form.classList.add(`${formClass}--disabled`);\n\n    for (let formElement of formElements) {\n      formElement.disabled = true;\n    }\n  }\n}\n\nexport const togglePageStatus = (status) => {\n  const form = document.querySelector('.ad-form');\n  const formMapFilter = document.querySelector('.map__filters');\n  toggleFormStatus(form, 'ad-form', status)\n  toggleFormStatus(formMapFilter,'map__filters', status)\n};\n\n","export const getRandomRange = (min, max) => {\n  if (min < 0 || max < 0) {\n\n    return;\n  }\n\n  if (min > max) {\n    [min, max] = [max, min];\n  }\n\n  return min + (max - min) * Math.random ();\n}\n\nexport const getRandomIntegerInRange = (min, max) => {\n  const randomNumber = getRandomRange(min, max);\n\n  return Math.round(randomNumber);\n}\n\nexport const getRandomFloatInRange = (min, max, significand = 2) => {\n  const randomNumber = getRandomRange(min, max);\n\n  return Number(randomNumber.toFixed(significand));\n}\n\nexport const getRandomArrElement = (arr) => arr[getRandomIntegerInRange(0, arr.length - 1)];\n\nexport const getRandomUniqueArr = (arr) => {\n  const uniqueArr = [];\n  const uniqueLength = getRandomIntegerInRange(0, arr.length-1);\n\n  for (let i = 0; i < uniqueLength; i++) {\n    let elem = arr[getRandomIntegerInRange(0, arr.length - 1)];\n\n    if (!uniqueArr.includes(elem)){\n      uniqueArr.push(elem);\n    }\n  }\n\n  return uniqueArr;\n}\n\nexport const declination = (number, txt, cases = [2, 0, 1, 1, 1, 2]) => {\n  return txt[(number % 100 > 4 && number % 100 < 20) ? 2 : cases[(number % 10 < 5) ? number % 10 : 5]];\n}\n\nexport const isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\nexport const debounce = (fn, delay) => {\n  let time;\n  return function () {\n    const debounced  = () => { fn.apply(this, arguments) }\n    clearTimeout(time);\n    time = setTimeout(debounced, delay)\n  }\n};\n\nexport const  createImgElement = (alt ='', width = '50', height = '50') => {\n  const img = document.createElement('img');\n  img.src = '';\n  img.alt = alt;\n  img.width = width;\n  img.height = height;\n\n  return img\n}\n","import {declination} from './util.js';\n\nconst WORD_DECLINATION = {\n  room : ['комната', 'комнаты', 'комнат'],\n  guest: ['гостя', 'гостей', 'гостей'],\n};\n\nconst typeTranslate =  {\n  palace: 'Дворец',\n  flat: 'Квартира',\n  house: 'Дом',\n  bungalow: 'Бунгало',\n}\n\nconst createListItem = (arr, basicClass) => {\n  const itemsFragment = document.createDocumentFragment();\n\n  arr.forEach((elem) => {\n    const modifyClass = `${basicClass}--${elem}`;\n    const newElement = document.createElement('li');\n    newElement.classList.add(basicClass, modifyClass);\n    itemsFragment.appendChild(newElement);\n  })\n\n  return itemsFragment;\n}\n\nconst addSrcFromArr = (arr, img) => {\n  const imgFragment = document.createDocumentFragment();\n\n  arr.forEach((elem) => {\n    const picture = img.cloneNode(true);\n    picture.src = elem;\n    imgFragment.appendChild(picture);\n  })\n\n  return imgFragment;\n}\n\nexport const createHostelCardElement = (hostel) => {\n  const {offer, author} = hostel;\n  const {\n    title,\n    address,\n    price,\n    type,\n    rooms,\n    guests,\n    checkin,\n    checkout,\n    features,\n    description,\n    photos,\n  } = offer;\n\n  const {avatar} = author;\n\n  const hostelCardTemplate = document.querySelector('#card').content.querySelector('.popup');\n  const hostelCard = hostelCardTemplate.cloneNode(true);\n\n  hostelCard.querySelector('.popup__avatar').src = avatar;\n  hostelCard.querySelector('.popup__title').textContent =title;\n  hostelCard.querySelector('.popup__text--address').textContent = address;\n  hostelCard.querySelector('.popup__text--price').innerHTML = `${price} <span>₽/ночь</span`;\n  hostelCard.querySelector('.popup__type').textContent = typeTranslate[type];\n  hostelCard.querySelector('.popup__text--capacity').textContent = `${rooms} ${declination(rooms, WORD_DECLINATION.room)} для ${guests} ${declination(guests, WORD_DECLINATION.guest)}`;\n  hostelCard.querySelector('.popup__text--time').textContent = `Заезд после ${checkin}, выезд до ${checkout}`;\n  hostelCard.querySelector('.popup__description').textContent = description;\n\n  const featuresList = hostelCard.querySelector('.popup__features');\n  featuresList.innerHTML = '';\n  const hostelFeaturesItems = createListItem(features, 'popup__feature');\n  featuresList.appendChild(hostelFeaturesItems);\n\n  const photoOfHostel = hostelCard.querySelector('.popup__photo');\n  const hostelPhotoContainer = hostelCard.querySelector('.popup__photos');\n  hostelPhotoContainer.innerHTML = ''\n  hostelPhotoContainer.appendChild(addSrcFromArr(photos, photoOfHostel));\n\n  return hostelCard\n}\n","/* global L:readonly */\nimport {togglePageStatus} from './status-page.js';\nimport {createHostelCardElement} from './hostel-card.js';\nimport {filterMarkers} from './filter.js';\nexport const DefaultLocation = {\n  X: 35.68240,\n  Y: 139.75176,\n};\n// eslint-disable-next-line no-unused-vars\nconst MAX_HOSTEL_MARKERS = 10;\n// eslint-disable-next-line no-unused-vars\nlet hostelsMarkers = []\n\nconst LeafletProperties = {\n  PATH_TO_MAIN_PIN: '../img/main-pin.svg',\n  PATH_TO_MARKER: '../img/pin.svg',\n  ICON_SIZE: 40,\n  TITLE_LAYER: 'http://{s}.tiles.maps.sputnik.ru/{z}/{x}/{y}.png',\n  ATTRIBUTION: 'Map data: © <a href=\"http://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors, under ODbL | Tiles: © <a href=\"http://maps.sputnik.ru/\" target=\"_blank\">Спутник</a>',\n};\n\nconst MAP_ZOOM = 13;\n\ntogglePageStatus(false);\n\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    togglePageStatus(true);\n  })\n\n  .setView({\n    lat: DefaultLocation.X,\n    lng: DefaultLocation.Y,\n  }, MAP_ZOOM);\n\nL.tileLayer(\n  LeafletProperties.TITLE_LAYER,\n  {\n    attribution: LeafletProperties.ATTRIBUTION,\n  },\n).addTo(map);\n\nexport const resetMap = () => {\n  map\n    .setView({\n      lat: DefaultLocation.X,\n      lng: DefaultLocation.Y,\n    }, MAP_ZOOM);\n};\n\nexport const createSearchMarker = () => {\n  const mainIcon = L.icon(\n    {\n      iconUrl: LeafletProperties.PATH_TO_MAIN_PIN,\n      iconSize: [LeafletProperties.ICON_SIZE, LeafletProperties.ICON_SIZE],\n      iconAnchor: [LeafletProperties.ICON_SIZE/2, LeafletProperties.ICON_SIZE],\n    },\n  );\n\n  const marker = L.marker(\n    {\n      lat: DefaultLocation.X,\n      lng: DefaultLocation.Y,\n    },\n    {\n      draggable: true,\n      icon: mainIcon,\n    },\n  );\n\n  marker.addTo(map);\n\n  return marker;\n}\n\nlet markerGroup;\n\nexport const createMarker = (hostel, group) => {\n\n  const mainIcon = L.icon(\n    {\n      iconUrl: LeafletProperties.PATH_TO_MARKER,\n      iconSize: [LeafletProperties.ICON_SIZE, LeafletProperties.ICON_SIZE],\n      iconAnchor: [LeafletProperties.ICON_SIZE/2, LeafletProperties.ICON_SIZE],\n    },\n  );\n\n  const marker = L.marker(\n    {\n      lat: hostel.location.lat,\n      lng: hostel.location.lng,\n    },\n    {\n      icon: mainIcon,\n    },\n  );\n\n  marker.addTo(group);\n  marker.bindPopup(createHostelCardElement(hostel));\n}\n\nexport const clearMarkers = () => {\n  map.removeLayer(markerGroup);\n  map.closePopup();\n}\n\nexport const renderMarkers = (data) => {\n  const markers = filterMarkers(data);\n  markerGroup = L.layerGroup();\n  markers.forEach((elem) => {createMarker(elem, markerGroup)})\n  markerGroup.addTo(map);\n}\n\nexport const reRenderMarkers = (data) => {\n  clearMarkers();\n  renderMarkers(data)\n}\n","\nimport {reRenderMarkers} from './map.js';\nimport { debounce } from './util.js';\n\nconst filterForm = document.querySelector('.map__filters');\nconst hostelType = filterForm.querySelector('#housing-type');\nconst hostelPrice = filterForm.querySelector('#housing-price');\nconst hostelRooms = filterForm.querySelector('#housing-rooms');\nconst hostelGuests = filterForm.querySelector('#housing-guests');\nconst hostelFeatures = filterForm.querySelector('#housing-features');\n\nconst RENDER_DELAY = 500;\nconst MAX_PRICE = 1000000000\nconst MAX_MARKERS = 10;\nconst priceRange = {\n  low: {\n    min: 0,\n    max: 10000,\n  },\n  middle: {\n    min: 10000,\n    max: 50000,\n  },\n  high: {\n    min: 50000,\n    max: MAX_PRICE,\n  },\n  any: {\n    min: 0,\n    max: MAX_PRICE,\n  },\n}\nconst ALL = 'any';\n\nconst compareFeatures = (checkboxes, features) => {\n  if (checkboxes.length === 0) {\n    return true;\n  }\n  if (checkboxes.length > features.length) {\n    return false;\n  }\n\n  for(const checkbox of checkboxes) {\n    if(!features.includes(checkbox.value)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nconst filterHostel = (hostel) => {\n  const {offer} = hostel;\n  const {\n    price,\n    type,\n    rooms,\n    guests,\n    features,\n  } = offer;\n\n  const activeFeatures = hostelFeatures.querySelectorAll('.map__checkbox:checked');\n\n  let isFiltered = true;\n\n  if (hostelType.value === ALL &&\n      hostelPrice.value === ALL &&\n      hostelRooms.value === ALL &&\n      hostelGuests.value === ALL &&\n      activeFeatures.length === 0) {\n    return true;\n  }\n\n  if (hostelType.value !== ALL && hostelType.value !== type) {\n    return false;\n  }\n\n  if (hostelRooms.value !== ALL && +hostelRooms.value !== rooms) {\n    return false;\n  }\n\n  if (hostelGuests.value !== ALL && guests !== +hostelGuests.value) {\n    return false;\n  }\n\n  const priceRangeValue =  hostelPrice.value;\n  if (priceRange[priceRangeValue].min >= price || priceRange[priceRangeValue].max < price) {\n    return false;\n  }\n\n  isFiltered = compareFeatures(activeFeatures, features);\n\n  return isFiltered\n}\n\nconst filterMarkers = (data) => {\n  const filteredArray = [];\n  let counterOfFilteredElement = 0 ;\n\n  for (let i = 0; i < data.length; i++) {\n    let hostel = data[i];\n\n    if (filterHostel(hostel)) {\n      filteredArray.push(hostel);\n      counterOfFilteredElement++\n    }\n\n    if (counterOfFilteredElement > MAX_MARKERS) {\n      return filteredArray\n    }\n  }\n\n  return filteredArray\n}\n\n\nexport const setFilterListener = (data) => {\n  // eslint-disable-next-line no-undef\n  filterForm.addEventListener('change',debounce(() => {reRenderMarkers(data)}, RENDER_DELAY));\n}\n\nexport {filterHostel,filterMarkers};\n","const API_URL = 'https://22.javascript.pages.academy/keksobooking';\nconst GET_DATA_ERROR_TEXT = 'Ошибка при загрузке данных';\n\nconst getData = (onSuccess, onError) => {\n  fetch(`${API_URL}/data`)\n    .then((response) => {\n      return response.json()\n    })\n    .then((data) => {\n      onSuccess(data)\n    })\n    .catch(() => onError(GET_DATA_ERROR_TEXT))\n}\n\nconst sendData = (onSuccess, onError, data) => {\n  fetch(API_URL,\n    {\n      method: 'POST',\n      body: data,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess()\n      } else {throw new Error()}\n    })\n    .catch(() => {\n      onError()})\n\n}\n\nexport {getData, sendData}\n","import {isEscEvent} from './util.js'\n\nconst messageTemplate = document.querySelector('#success').content.querySelector('.success');\nconst errorTemplate = document.querySelector('#error').content.querySelector('.error');\nconst main = document.querySelector('main');\n\n\nconst showSuccessMessage = () => {\n  const messageSuccess = messageTemplate.cloneNode(true);\n  messageSuccess.style.zIndex = '1000';\n  main.appendChild(messageSuccess);\n\n  const onEscCloseMessage = (evt) => {\n    if (isEscEvent(evt)) {\n      messageSuccess.remove();\n      document.removeEventListener('keydown', onEscCloseMessage);\n    }\n  };\n\n  messageSuccess.addEventListener('click', () => {\n    messageSuccess.remove();\n    document.removeEventListener('keydown', onEscCloseMessage);\n  })\n\n  document.addEventListener('keydown', onEscCloseMessage)\n}\n\nconst showErrorMessage = (errorText) => {\n  const messageError = errorTemplate.cloneNode(true);\n  messageError.querySelector('.error__message').textContent = errorText;\n  messageError.style.zIndex = '1000';\n  main.appendChild(messageError);\n\n  const onEscCloseMessage = (evt) => {\n    if (isEscEvent(evt)) {\n      messageError.remove();\n      document.removeEventListener('keydown', onEscCloseMessage);\n    }\n  };\n  messageError.addEventListener('click', () => {\n    messageError.remove();\n    document.removeEventListener('keydown', onEscCloseMessage);\n  })\n\n  document.addEventListener('keydown',onEscCloseMessage);\n\n}\n\nexport {showSuccessMessage,showErrorMessage}\n","/* eslint-disable no-undef */\n// eslint-disable-next-line no-unused-vars\nimport {createSearchMarker, resetMap, DefaultLocation} from './map.js';\nimport {sendData} from './api.js'\nimport {showSuccessMessage,showErrorMessage} from './messages.js'\nimport { debounce } from './util.js';\n\n\nconst MAX_GUESTS_VALUE = 100;\nconst MAX_ROOMS_VALUE = 0;\nconst SEND_FORM_ERROR_TEXT = 'Ошибка размещения объявления';\nconst minPriceOfType = {\n  palace: '10000',\n  flat: '1000',\n  house: '5000',\n  bungalow: '0',\n};\n\nconst TitleLength = {\n  MIN: 30,\n  MAX: 100,\n};\n//export const addressMarker = createSearchMarker();\nconst form = document.querySelector('.ad-form')\nconst addressMarker = createSearchMarker();\nconst selectType = form.querySelector('#type');\nconst inputPrice = form.querySelector('#price')\nconst selectCheckIn = form.querySelector('#timein');\nconst selectCheckOut = form.querySelector('#timeout');\nconst inputAddress = form.querySelector('#address')\nconst inputTitle = form.querySelector('#title')\nconst selectRoomNumber = form.querySelector('#room_number');\nconst selectGuests = form.querySelector('#capacity');\nconst resetButton =form.querySelector('.ad-form__reset');\n\nconst onMarkerMove = () => {\n  const address = addressMarker.getLatLng();\n  inputAddress.value = `${address.lat.toFixed(5)} ${address.lng.toFixed(5)}`;\n};\n\nconst resetMarker = () => {\n  addressMarker.setLatLng([DefaultLocation.X,DefaultLocation.Y])\n}\nconst onInputTitleChange = (evt) => {\n  const title = evt.target.value;\n\n  if (title.length < TitleLength.MIN) {\n    evt.target.setCustomValidity(`Введите еще  ${TitleLength.MIN - title.length} сим.`)\n\n  } else if (title.length > TitleLength.MAX) {\n    evt.target.setCustomValidity(`Слишком длинное название удалите:  ${title.length - TitleLength.MAX} сим.`);\n  } else {\n    evt.target.setCustomValidity('')\n  }\n  evt.target.reportValidity();\n}\n\nconst onPriceInput = (evt) => {\n  if (evt.target.validity.rangeOverflow) {\n    evt.target.setCustomValidity (`Стоимость не должна быть больше ${evt.target.max}`)\n  } else if (evt.target.validity.rangeUnderflow) {\n    evt.target.setCustomValidity (`Стоимость не должна быть меньше ${evt.target.min}`)\n  } else {\n    evt.target.setCustomValidity('')\n  }\n  evt.target.reportValidity();\n}\n\nconst onSelectChange = (evt) => {\n  selectCheckIn.value = evt.target.value;\n  selectCheckOut.value = evt.target.value;\n}\n\nconst onTypeInputChange = () => {\n  inputPrice.placeholder = minPriceOfType[selectType.value];\n  inputPrice.min = minPriceOfType[selectType.value];\n};\n\nconst onSelectRoomsChange = () => {\n  const guestOptions = selectGuests.children;\n  const guestElements = selectGuests.children;\n  const guestsArray = Array.from(guestElements);\n\n  +selectRoomNumber.value === MAX_ROOMS_VALUE ? selectGuests.value = MAX_GUESTS_VALUE  : selectGuests.value = selectRoomNumber.value;\n\n  for (const guest of guestOptions) {\n    guest.style.display = 'block';\n  }\n\n  guestsArray.forEach((elem) => {\n    if (+selectRoomNumber.value < +elem.value) {\n      elem.style.display = 'none';\n    }\n\n    if (+selectRoomNumber.value === MAX_ROOMS_VALUE && +elem.value === MAX_GUESTS_VALUE) {\n      elem.style.display = 'block';\n    }\n  })\n};\n\nconst sendFormSuccess = () => {\n  showSuccessMessage();\n  form.reset();\n  onMarkerMove();\n};\n\nconst sendFormError = () => showErrorMessage(SEND_FORM_ERROR_TEXT)\n\nconst onFormSubmit = (evt) => {\n  evt.preventDefault();\n  sendData(sendFormSuccess,sendFormError,new FormData (evt.target))\n};\n\nconst onFormReset = (evt) => {\n  evt.preventDefault();\n  form.reset();\n  resetMap()\n  resetMarker();\n}\n\n\n\ninputTitle.addEventListener('input', debounce(onInputTitleChange,500));\ninputPrice.addEventListener('input', onPriceInput);\nselectCheckIn.addEventListener('change', onSelectChange);\nselectCheckOut.addEventListener('change', onSelectChange);\nselectType.addEventListener('change', onTypeInputChange);\nselectRoomNumber.addEventListener('change', onSelectRoomsChange);\nform.addEventListener('submit', onFormSubmit);\nresetButton.addEventListener('click',onFormReset)\n\n\naddressMarker.on('move', onMarkerMove);\ninputAddress.readOnly = true;\nonMarkerMove();\nonTypeInputChange();\nonSelectRoomsChange();\n\n","import {createImgElement} from './util.js'\n\nconst avatarPreviewPicture = document.querySelector('.ad-form-header__preview');\nconst avatarPreviewUpLoader = document.querySelector('.ad-form-header__input');\nconst hostelPreviewPicture = document.querySelector('.ad-form__photo');\nconst hostelPreviewUploader = document.querySelector('.ad-form__input');\nconst IMG_FORMAT = ['image/jpg', 'image/png', 'image/svg', 'image/jpeg', 'image/svg+xml'];\nconst HOSTEL_PHOTO_ALT = 'Фотография вашего объекта';\n\nconst onUploadeChange = (upload, preview) => {\n  const file = upload.files[0];\n  const fileType = file.type;\n  const matches = IMG_FORMAT.includes(fileType)\n\n  if (preview.children.length === 0 && matches) {\n    preview.appendChild(createImgElement(HOSTEL_PHOTO_ALT, 70, 70))\n  }\n\n  if (matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => {\n      // до этого тут было написано  preview.firstChild.src не понял почему с первой картинкой не работало\n      preview.children[0].src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n  }\n}\n\nhostelPreviewUploader.addEventListener('change', () => onUploadeChange(hostelPreviewUploader, hostelPreviewPicture))\navatarPreviewUpLoader.addEventListener('change', () => onUploadeChange(avatarPreviewUpLoader, avatarPreviewPicture))\n","/* eslint-disable no-undef */\n\nimport {setFilterListener} from './filter.js';\nimport './form.js';\nimport {getData} from './api.js'\nimport {renderMarkers} from './map.js'\nimport {showErrorMessage} from './messages.js'\nimport './form-photo.js';\n\n//не понимаю почему дебоунс так работает\nconst successHandler = (data) =>  {\n  renderMarkers(data);\n  setFilterListener(data)\n}\nconst errorHandler = (message) => showErrorMessage(message)\n\ngetData(successHandler,errorHandler)\n\n\n"],"sourceRoot":""}