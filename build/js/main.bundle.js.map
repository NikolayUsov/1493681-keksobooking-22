{"version":3,"sources":["webpack://keksobooking/./source/status-page.js","webpack://keksobooking/./source/util.js","webpack://keksobooking/./source/hostel-card.js","webpack://keksobooking/./source/map.js","webpack://keksobooking/./source/filter.js","webpack://keksobooking/./source/api.js","webpack://keksobooking/./source/messages.js","webpack://keksobooking/./source/form-photo.js","webpack://keksobooking/./source/form.js","webpack://keksobooking/./source/main.js"],"names":["toggleFormStatus","form","formClass","status","formElements","children","classList","remove","formElement","disabled","add","togglePageStatus","document","querySelector","formMapFilter","declination","number","txt","cases","isEscEvent","evt","key","WORD_DECLINATION","typeTranslate","palace","flat","house","bungalow","DefaultLocation","LeafletProperties","markerGroup","map","L","on","setView","lat","lng","tileLayer","attribution","addTo","renderMarkers","data","markers","filterMarkers","layerGroup","forEach","elem","hostel","group","mainIcon","icon","iconUrl","iconSize","iconAnchor","marker","location","bindPopup","offer","author","title","address","price","type","rooms","guests","checkin","checkout","features","description","photos","avatar","hostelCard","content","cloneNode","avataImg","src","textContent","innerHTML","featuresList","hostelFeaturesItems","arr","basicClass","itemsFragment","createDocumentFragment","modifyClass","newElement","createElement","appendChild","createListItem","photoOfHostel","hostelPhotoContainer","img","imgFragment","picture","addSrcFromArr","parentNode","child","hasChildNodes","tagName","clearEmptyElement","createHostelCardElement","createMarker","MAX_PRICE","priceRange","low","min","max","middle","high","any","ALL","filterForm","hostelType","hostelPrice","hostelRooms","hostelGuests","hostelFeatures","filterHostel","activeFeatures","querySelectorAll","isFiltered","value","length","priceRangeValue","checkboxes","checkbox","includes","compareFeatures","filteredArray","counterOfFilteredElement","i","push","API_URL","messageTemplate","errorTemplate","main","showErrorMessage","errorText","messageError","style","zIndex","onEscCloseMessage","removeEventListener","addEventListener","IMG_FORMAT","avatarPreviewPicture","avatarPreviewUpLoader","hostelPreviewPicture","hostelPreviewUploader","onUploadChange","upload","preview","file","files","fileType","matches","alt","width","height","createImgElement","reader","FileReader","result","readAsDataURL","clearPhotoPreview","minPriceOfType","addressMarker","draggable","createSearchMarker","selectType","inputPrice","selectCheckIn","selectCheckOut","inputAddress","inputTitle","selectRoomNumber","selectGuests","resetButton","onMarkerMove","getLatLng","toFixed","onSelectChange","target","onTypeInputChange","placeholder","onSelectRoomsChange","guestOptions","guestElements","guestsArray","Array","from","guest","display","sendFormSuccess","messageSuccess","showSuccessMessage","reset","sendFormError","onSuccess","onError","_","debounce","setCustomValidity","reportValidity","validity","rangeOverflow","rangeUnderflow","preventDefault","FormData","fetch","method","body","then","response","ok","Error","catch","setLatLng","readOnly","removeLayer","closePopup","reRenderMarkers","setFilterListener","message","json"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const toggleFormStatus = (form, formClass, status) => {\n  const formElements = form.children;\n  if (status) {\n    form.classList.remove(`${formClass}--disabled`);\n\n    for (let formElement of formElements) {\n      formElement.disabled = false;\n    }\n\n  } else {\n    form.classList.add(`${formClass}--disabled`);\n\n    for (let formElement of formElements) {\n      formElement.disabled = true;\n    }\n  }\n}\n\nexport const togglePageStatus = (status) => {\n  const form = document.querySelector('.ad-form');\n  const formMapFilter = document.querySelector('.map__filters');\n  toggleFormStatus(form, 'ad-form', status);\n  toggleFormStatus(formMapFilter,'map__filters', status);\n};\n\n","\nexport const declination = (number, txt, cases = [2, 0, 1, 1, 1, 2]) => {\n  return txt[(number % 100 > 4 && number % 100 < 20) ? 2 : cases[(number % 10 < 5) ? number % 10 : 5]];\n}\n\nexport const isEscEvent = (evt) => {\n  return evt.key === 'Escape' || evt.key === 'Esc';\n};\n\nexport const  createImgElement = (alt ='', width = '50', height = '50') => {\n  const img = document.createElement('img');\n  img.src = '';\n  img.alt = alt;\n  img.width = width;\n  img.height = height;\n\n  return img\n}\n","import { declination } from './util.js';\n\nconst WORD_DECLINATION = {\n  room: ['комната', 'комнаты', 'комнат'],\n  guest: ['гостя', 'гостей', 'гостей'],\n};\nconst typeTranslate = {\n  palace: 'Дворец',\n  flat: 'Квартира',\n  house: 'Дом',\n  bungalow: 'Бунгало',\n}\n\nconst createListItem = (arr, basicClass) => {\n  const itemsFragment = document.createDocumentFragment();\n\n  arr.forEach((elem) => {\n    const modifyClass = `${basicClass}--${elem}`;\n    const newElement = document.createElement('li');\n    newElement.classList.add(basicClass, modifyClass);\n    itemsFragment.appendChild(newElement);\n  })\n\n  return itemsFragment;\n}\n\nconst addSrcFromArr = (arr, img) => {\n  const imgFragment = document.createDocumentFragment();\n\n  arr.forEach((elem) => {\n    const picture = img.cloneNode(true);\n    picture.src = elem;\n    imgFragment.appendChild(picture);\n  })\n\n  return imgFragment;\n}\n\nconst clearEmptyElement = (parentNode) => {\n  const child = parentNode.children;\n\n  for (let elem of child) {\n    if (!elem.hasChildNodes() && elem.tagName !== 'IMG') {\n      elem.remove();\n    }\n  }\n\n  return parentNode;\n}\n\nexport const createHostelCardElement = (hostel) => {\n  const { offer, author } = hostel;\n  const {\n    title,\n    address,\n    price,\n    type,\n    rooms,\n    guests,\n    checkin,\n    checkout,\n    features,\n    description,\n    photos,\n  } = offer;\n\n  const { avatar } = author;\n\n  const hostelCardTemplate = document.querySelector('#card').content.querySelector('.popup');\n  const hostelCard = hostelCardTemplate.cloneNode(true);\n  const avataImg = hostelCard.querySelector('.popup__avatar');\n\n  avatar === '' ? avataImg.remove() : avataImg.src = avatar;\n  hostelCard.querySelector('.popup__title').textContent = title;\n  hostelCard.querySelector('.popup__text--address').textContent = address;\n  hostelCard.querySelector('.popup__text--price').innerHTML = `${price} <span>₽/ночь</span`;\n  hostelCard.querySelector('.popup__type').textContent = typeTranslate[type];\n  hostelCard.querySelector('.popup__text--capacity').textContent = `${rooms} ${declination(rooms, WORD_DECLINATION.room)} для ${guests} ${declination(guests, WORD_DECLINATION.guest)}`;\n  hostelCard.querySelector('.popup__text--time').textContent = `Заезд после ${checkin}, выезд до ${checkout}`;\n  hostelCard.querySelector('.popup__description').textContent = description;\n\n  const featuresList = hostelCard.querySelector('.popup__features');\n  featuresList.innerHTML = '';\n  const hostelFeaturesItems = createListItem(features, 'popup__feature');\n  featuresList.appendChild(hostelFeaturesItems);\n\n  const photoOfHostel = hostelCard.querySelector('.popup__photo');\n  const hostelPhotoContainer = hostelCard.querySelector('.popup__photos');\n  hostelPhotoContainer.innerHTML = ''\n  hostelPhotoContainer.appendChild(addSrcFromArr(photos, photoOfHostel));\n\n  return clearEmptyElement(hostelCard);\n}\n","/* global L:readonly */\nimport {togglePageStatus} from './status-page.js';\nimport {createHostelCardElement} from './hostel-card.js';\nimport {filterMarkers} from './filter.js';\n\nexport const DefaultLocation = {\n  X: 35.68240,\n  Y: 139.75176,\n};\n\nconst LeafletProperties = {\n  PATH_TO_MAIN_PIN: 'img/main-pin.svg',\n  PATH_TO_MARKER: 'img/pin.svg',\n  ICON_SIZE: 40,\n  TITLE_LAYER: 'http://{s}.tiles.maps.sputnik.ru/{z}/{x}/{y}.png',\n  ATTRIBUTION: 'Map data: © <a href=\"http://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors, under ODbL | Tiles: © <a href=\"http://maps.sputnik.ru/\" target=\"_blank\">Спутник</a>',\n};\n\nlet markerGroup;\nconst MAP_ZOOM = 13;\n\ntogglePageStatus(false);\n\nconst map = L.map('map-canvas')\n  .on('load', () => {\n    togglePageStatus(true);\n  })\n\n  .setView({\n    lat: DefaultLocation.X,\n    lng: DefaultLocation.Y,\n  }, MAP_ZOOM);\n\nL.tileLayer(\n  LeafletProperties.TITLE_LAYER,\n  {\n    attribution: LeafletProperties.ATTRIBUTION,\n  },\n).addTo(map);\n\nexport const resetMap = () => {\n  map\n    .setView({\n      lat: DefaultLocation.X,\n      lng: DefaultLocation.Y,\n    }, MAP_ZOOM);\n};\n\nexport const createSearchMarker = () => {\n  const mainIcon = L.icon(\n    {\n      iconUrl: LeafletProperties.PATH_TO_MAIN_PIN,\n      iconSize: [LeafletProperties.ICON_SIZE, LeafletProperties.ICON_SIZE],\n      iconAnchor: [LeafletProperties.ICON_SIZE/2, LeafletProperties.ICON_SIZE],\n    },\n  );\n\n  const marker = L.marker(\n    {\n      lat: DefaultLocation.X,\n      lng: DefaultLocation.Y,\n    },\n    {\n      draggable: true,\n      icon: mainIcon,\n    },\n  );\n\n  marker.addTo(map);\n\n  return marker;\n}\n\nexport const createMarker = (hostel, group) => {\n\n  const mainIcon = L.icon(\n    {\n      iconUrl: LeafletProperties.PATH_TO_MARKER,\n      iconSize: [LeafletProperties.ICON_SIZE, LeafletProperties.ICON_SIZE],\n      iconAnchor: [LeafletProperties.ICON_SIZE/2, LeafletProperties.ICON_SIZE],\n    },\n  );\n\n  const marker = L.marker(\n    {\n      lat: hostel.location.lat,\n      lng: hostel.location.lng,\n    },\n    {\n      icon: mainIcon,\n    },\n  );\n\n  marker.addTo(group);\n  marker.bindPopup(createHostelCardElement(hostel));\n}\n\nexport const clearMarkers = () => {\n  map.removeLayer(markerGroup);\n  map.closePopup();\n}\n\nexport const renderMarkers = (data) => {\n  const markers = filterMarkers(data);\n  markerGroup = L.layerGroup();\n  markers.forEach((elem) => {createMarker(elem, markerGroup)})\n  markerGroup.addTo(map);\n}\n\nexport const reRenderMarkers = (data) => {\n  clearMarkers();\n  renderMarkers(data);\n}\n","/* global _:readonly */\nimport { reRenderMarkers } from './map.js';\n\nconst RENDER_DELAY = 500;\nconst MAX_PRICE = 1000000000\nconst MAX_MARKERS = 10;\nconst priceRange = {\n  low: {\n    min: 0,\n    max: 10000,\n  },\n  middle: {\n    min: 10000,\n    max: 50000,\n  },\n  high: {\n    min: 50000,\n    max: MAX_PRICE,\n  },\n  any: {\n    min: 0,\n    max: MAX_PRICE,\n  },\n}\nconst ALL = 'any';\n\nconst filterForm = document.querySelector('.map__filters');\nconst hostelType = filterForm.querySelector('#housing-type');\nconst hostelPrice = filterForm.querySelector('#housing-price');\nconst hostelRooms = filterForm.querySelector('#housing-rooms');\nconst hostelGuests = filterForm.querySelector('#housing-guests');\nconst hostelFeatures = filterForm.querySelector('#housing-features');\n\nconst compareFeatures = (checkboxes, features) => {\n  if (checkboxes.length === 0) {\n    return true;\n  }\n  if (checkboxes.length > features.length) {\n    return false;\n  }\n\n  for (const checkbox of checkboxes) {\n    if (!features.includes(checkbox.value)) {\n      return false\n    }\n  }\n\n  return true;\n}\n\nconst filterHostel = (hostel) => {\n  const { offer } = hostel;\n  const {\n    price,\n    type,\n    rooms,\n    guests,\n    features,\n  } = offer;\n\n  const activeFeatures = hostelFeatures.querySelectorAll('.map__checkbox:checked');\n\n  let isFiltered = true;\n\n  if (hostelType.value === ALL &&\n    hostelPrice.value === ALL &&\n    hostelRooms.value === ALL &&\n    hostelGuests.value === ALL &&\n    activeFeatures.length === 0) {\n    return true;\n  }\n\n  if (hostelType.value !== ALL && hostelType.value !== type) {\n    return false;\n  }\n\n  if (hostelRooms.value !== ALL && +hostelRooms.value !== rooms) {\n    return false;\n  }\n\n  if (hostelGuests.value !== ALL && guests !== +hostelGuests.value) {\n    return false;\n  }\n\n  const priceRangeValue = hostelPrice.value;\n  if (priceRange[priceRangeValue].min >= price || priceRange[priceRangeValue].max < price) {\n    return false;\n  }\n\n  isFiltered = compareFeatures(activeFeatures, features);\n\n  return isFiltered\n}\n\nconst filterMarkers = (data) => {\n  const filteredArray = [];\n  let counterOfFilteredElement = 0;\n\n  for (let i = 0; i < data.length; i++) {\n    let hostel = data[i];\n\n    if (filterHostel(hostel)) {\n      filteredArray.push(hostel);\n      counterOfFilteredElement++\n    }\n\n    if (counterOfFilteredElement > MAX_MARKERS) {\n      return filteredArray;\n    }\n  }\n\n  return filteredArray;\n}\n\nexport const setFilterListener = (data) => {\n  filterForm.addEventListener('change', _.debounce(() => { reRenderMarkers(data) }, RENDER_DELAY));\n}\n\nexport { filterHostel, filterMarkers };\n","const API_URL = 'https://22.javascript.pages.academy/keksobooking';\nconst GET_DATA_ERROR_TEXT = 'Ошибка при загрузке данных';\n\nconst getData = (onSuccess, onError) => {\n  fetch(`${API_URL}/data`)\n    .then((response) => {\n      return response.json()\n    })\n    .then((data) => {\n      onSuccess(data)\n    })\n    .catch(() => onError(GET_DATA_ERROR_TEXT))\n}\n\nconst sendData = (onSuccess, onError, data) => {\n  fetch(API_URL,\n    {\n      method: 'POST',\n      body: data,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess()\n      } else { throw new Error() }\n    })\n    .catch(() => {\n      onError()\n    })\n\n}\n\nexport { getData, sendData };\n","import {isEscEvent} from './util.js'\n\nconst messageTemplate = document.querySelector('#success').content.querySelector('.success');\nconst errorTemplate = document.querySelector('#error').content.querySelector('.error');\nconst main = document.querySelector('main');\n\nconst showSuccessMessage = () => {\n  const messageSuccess = messageTemplate.cloneNode(true);\n  messageSuccess.style.zIndex = '1000';\n  main.appendChild(messageSuccess);\n\n  const onEscCloseMessage = (evt) => {\n    if (isEscEvent(evt)) {\n      messageSuccess.remove();\n      document.removeEventListener('keydown', onEscCloseMessage);\n    }\n  };\n\n  messageSuccess.addEventListener('click', () => {\n    messageSuccess.remove();\n    document.removeEventListener('keydown', onEscCloseMessage);\n  })\n\n  document.addEventListener('keydown', onEscCloseMessage);\n}\n\nconst showErrorMessage = (errorText) => {\n  const messageError = errorTemplate.cloneNode(true);\n  messageError.querySelector('.error__message').textContent = errorText;\n  messageError.style.zIndex = '1000';\n  main.appendChild(messageError);\n\n  const onEscCloseMessage = (evt) => {\n    if (isEscEvent(evt)) {\n      messageError.remove();\n      document.removeEventListener('keydown', onEscCloseMessage);\n    }\n  };\n  messageError.addEventListener('click', () => {\n    messageError.remove();\n    document.removeEventListener('keydown', onEscCloseMessage);\n  })\n\n  document.addEventListener('keydown',onEscCloseMessage);\n\n}\n\nexport {showSuccessMessage,showErrorMessage}\n","import { createImgElement } from './util.js';\n\nconst IMG_FORMAT = ['image/jpg', 'image/png', 'image/svg', 'image/jpeg', 'image/svg+xml'];\nconst HOSTEL_PHOTO_ALT = 'Фотография вашего объекта';\nconst DEFAULT_SRC = 'img/muffin-grey.svg';\n\nconst avatarPreviewPicture = document.querySelector('.ad-form-header__preview');\nconst avatarPreviewUpLoader = document.querySelector('.ad-form-header__input');\nconst hostelPreviewPicture = document.querySelector('.ad-form__photo');\nconst hostelPreviewUploader = document.querySelector('.ad-form__input');\n\nconst onUploadChange = (upload, preview) => {\n  const file = upload.files[0];\n  const fileType = file.type;\n  const matches = IMG_FORMAT.includes(fileType);\n\n  if (preview.children.length === 0 && matches) {\n    preview.appendChild(createImgElement(HOSTEL_PHOTO_ALT, 70, 70));\n  }\n\n  if (matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => {\n      preview.children[0].src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n  }\n}\n\nconst clearPhotoPreview = () => {\n  const avatarImg = avatarPreviewPicture.querySelector('img');\n  avatarImg.src = DEFAULT_SRC;\n  hostelPreviewPicture.innerHTML = '';\n}\n\nhostelPreviewUploader.addEventListener('change', () => onUploadChange(hostelPreviewUploader, hostelPreviewPicture))\navatarPreviewUpLoader.addEventListener('change', () => onUploadChange(avatarPreviewUpLoader, avatarPreviewPicture))\n\nexport { clearPhotoPreview };\n","/* global _:readonly */\nimport { createSearchMarker, resetMap, DefaultLocation } from './map.js';\nimport { sendData } from './api.js';\nimport { showSuccessMessage, showErrorMessage } from './messages.js';\nimport { clearPhotoPreview } from './form-photo.js';\n\nconst INPUT_DELAY = 500;\nconst MAX_GUESTS_VALUE = 100;\nconst MAX_ROOMS_VALUE = 0;\nconst SEND_FORM_ERROR_TEXT = 'Ошибка размещения объявления';\nconst minPriceOfType = {\n  palace: '10000',\n  flat: '1000',\n  house: '5000',\n  bungalow: '0',\n};\nconst TitleLength = {\n  MIN: 30,\n  MAX: 100,\n};\n\nconst form = document.querySelector('.ad-form')\nconst addressMarker = createSearchMarker();\nconst selectType = form.querySelector('#type');\nconst inputPrice = form.querySelector('#price')\nconst selectCheckIn = form.querySelector('#timein');\nconst selectCheckOut = form.querySelector('#timeout');\nconst inputAddress = form.querySelector('#address');\nconst inputTitle = form.querySelector('#title');\nconst selectRoomNumber = form.querySelector('#room_number');\nconst selectGuests = form.querySelector('#capacity');\nconst resetButton = form.querySelector('.ad-form__reset');\n\nconst onMarkerMove = () => {\n  const address = addressMarker.getLatLng();\n  inputAddress.value = `${address.lat.toFixed(5)} ${address.lng.toFixed(5)}`;\n};\n\nconst resetMarker = () => {\n  addressMarker.setLatLng([DefaultLocation.X, DefaultLocation.Y])\n}\nconst onInputTitleChange = (evt) => {\n  const title = evt.target.value;\n\n  if (title.length < TitleLength.MIN) {\n    evt.target.setCustomValidity(`Введите еще  ${TitleLength.MIN - title.length} сим.`);\n\n  } else if (title.length > TitleLength.MAX) {\n    evt.target.setCustomValidity(`Слишком длинное название удалите:  ${title.length - TitleLength.MAX} сим.`);\n  } else {\n    evt.target.setCustomValidity('');\n  }\n  evt.target.reportValidity();\n}\n\nconst onPriceInput = (evt) => {\n  if (evt.target.validity.rangeOverflow) {\n    evt.target.setCustomValidity(`Стоимость не должна быть больше ${evt.target.max}`);\n  } else if (evt.target.validity.rangeUnderflow) {\n    evt.target.setCustomValidity(`Стоимость не должна быть меньше ${evt.target.min}`);\n  } else {\n    evt.target.setCustomValidity('');\n  }\n  evt.target.reportValidity();\n}\n\nconst onSelectChange = (evt) => {\n  selectCheckIn.value = evt.target.value;\n  selectCheckOut.value = evt.target.value;\n}\n\nconst onTypeInputChange = () => {\n  inputPrice.placeholder = minPriceOfType[selectType.value];\n  inputPrice.min = minPriceOfType[selectType.value];\n};\n\nconst onSelectRoomsChange = () => {\n  const guestOptions = selectGuests.children;\n  const guestElements = selectGuests.children;\n  const guestsArray = Array.from(guestElements);\n\n  +selectRoomNumber.value === MAX_ROOMS_VALUE ? selectGuests.value = MAX_GUESTS_VALUE : selectGuests.value = selectRoomNumber.value;\n\n  for (const guest of guestOptions) {\n    guest.style.display = 'block';\n  }\n\n  guestsArray.forEach((elem) => {\n    if (+selectRoomNumber.value < +elem.value) {\n      elem.style.display = 'none';\n    }\n\n    if (+selectRoomNumber.value === MAX_ROOMS_VALUE && +elem.value === MAX_GUESTS_VALUE) {\n      elem.style.display = 'block';\n    }\n  })\n};\n\nconst sendFormSuccess = () => {\n  showSuccessMessage();\n  form.reset();\n  onMarkerMove();\n};\n\nconst sendFormError = () => showErrorMessage(SEND_FORM_ERROR_TEXT)\n\nconst onFormSubmit = (evt) => {\n  evt.preventDefault();\n  clearPhotoPreview();\n  sendData(sendFormSuccess, sendFormError, new FormData(evt.target))\n};\n\nconst onFormReset = (evt) => {\n  evt.preventDefault();\n  form.reset();\n  resetMap()\n  resetMarker();\n  clearPhotoPreview();\n}\n\ninputTitle.addEventListener('input', _.debounce(onInputTitleChange, INPUT_DELAY));\ninputPrice.addEventListener('input', onPriceInput);\nselectCheckIn.addEventListener('change', onSelectChange);\nselectCheckOut.addEventListener('change', onSelectChange);\nselectType.addEventListener('change', onTypeInputChange);\nselectRoomNumber.addEventListener('change', onSelectRoomsChange);\nform.addEventListener('submit', onFormSubmit);\nresetButton.addEventListener('click', onFormReset);\n\naddressMarker.on('move', onMarkerMove);\ninputAddress.readOnly = true;\nonMarkerMove();\nonTypeInputChange();\nonSelectRoomsChange();\n\n","import { setFilterListener } from './filter.js';\nimport './form.js';\nimport { getData } from './api.js'\nimport { renderMarkers } from './map.js'\nimport { showErrorMessage } from './messages.js'\nimport './form-photo.js';\n\nconst successHandler = (data) => {\n  renderMarkers(data);\n  setFilterListener(data);\n}\n\nconst errorHandler = (message) => showErrorMessage(message);\ngetData(successHandler, errorHandler);\n\n\n"],"sourceRoot":""}